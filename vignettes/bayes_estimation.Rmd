---
title: "Bayes estimation"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Signature generation from tree and count}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r include = FALSE}
library(knitr)

knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


## Input dataset

```{r}
library(here)

readRDS(here("dev/counts_non_redundant.rds"))

```

# Parse dataset

```{bash}

Rscript dev/modeling_code/parse_data.R dev/counts_non_redundant.rds dev/tree_kamran.yaml dev/counts_non_redundant_parsed.rds

```

In this test run, we are using data for only 2 cell types, which are - 2 NK cell subtypes- CD56bright NK and CD56dim NK cells.

```{bash}

srun --job-name "InteractiveJob" --cpus-per-task 8 --mem-per-cpu 55000 --time 48:00:00 --pty bash

Rscript dev/modeling_code/create_input.R dev/counts_non_redundant_parsed.rds dev/modeling_results

~/third_party_sofware/cctools-7.2.0-x86_64-centos7/bin/makeflow -T slurm -J 200  dev/modeling_results/run_model.makeflow


```

